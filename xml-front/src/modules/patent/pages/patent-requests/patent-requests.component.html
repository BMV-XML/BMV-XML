<div class="row">
  <div class="col-9">
    <app-search-filter (filterElements)="filter($event)" (searchElements)="search($event)"></app-search-filter>
  </div>
  <div class="col-3">
    <div class="row mx-3">
      <mat-form-field appearance="fill">
        <mat-label>Unosite interval</mat-label>
        <mat-date-range-input [formGroup]="range" [rangePicker]="picker">
          <input matStartDate formControlName="start" placeholder="Početni datum">
          <input matEndDate formControlName="end" placeholder="Krajnji datum">
        </mat-date-range-input>
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-date-range-picker #picker></mat-date-range-picker>

        <mat-error *ngIf="range.controls.start.hasError('matStartDateInvalid')">Početni datum nije validan</mat-error>
        <mat-error *ngIf="range.controls.end.hasError('matEndDateInvalid')">Krajnji datum nije validan</mat-error>
      </mat-form-field>

      <button class="" (click)="makeReport()" mat-raised-button>Preuzmi izveštaj</button>
    </div>
    <div class="row mt-3">
      <app-show-last-searched-values *ngIf="searchOrFiltered" [isSearched]="searched"
                                     [searchParams]="searchParams" [filterParams]="filterParams"></app-show-last-searched-values>
    </div>
  </div>
</div>

<p-table [value]="patents" styleClass="p-datatable-striped" [tableStyle]="{'min-width': '50rem'}">
  <ng-template pTemplate="header">
    <tr>
      <th>Code</th>
      <th>Datum podnosenja</th>
      <th>Podnosilac</th>
      <th> PDF</th>
      <th> HTML</th>
      <th> RDF</th>
      <th> JSON</th>
      <th> Donesi rešenje</th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-patent>
    <tr (click)="getURL(patent.id)">
      <td>{{patent.id[0]}}</td>
      <td>{{patent.applicationDate | dateArrayToString}}</td>
      <td>{{patent.submitter[0]}}</td>
      <th>
        <button pButton class="p-button-sm" (click)="getPDF($event, patent.id[0])"> PDF</button>
      </th>
      <th>
        <button pButton class="p-button-sm" (click)="getHTML($event, patent.id[0])"> HTML</button>
      </th>
      <th>
        <button pButton class="p-button-sm" (click)="getRDF($event, patent.id[0])"> RDF</button>
      </th>
      <th>
        <button pButton class="p-button-sm" (click)="getJSON($event, patent.id[0])"> JSON</button>
      </th>
      <th>
        <button pButton class="p-button-sm" *ngIf="patent.hasSolution[0] === 'false'"
                (click)="openAddSolutionDialog($event, patent.id[0])"> Dodaj rešenje
        </button>
        <button pButton class="p-button-sm" *ngIf="patent.hasSolution[0] === 'true'"
                (click)="openViewSolutionDialog($event, patent.id[0])"> Vidi rešenje
        </button>
      </th>
    </tr>
  </ng-template>
</p-table>

<p-toast position="top-right" key="patent-list-message"></p-toast>
